<html xmlns="http://www.w3.org/1999/xhtml">
    <head>
        <title>Emil Hernvall</title>
        <style type="text/css">
            body {
                font-family: Arial;
                margin: 0 auto;
                width: 800px;
                color: #333;
            }
            dl dt {
                margin-top: 10px;
                font-weight: bold;
                line-height: 1.5em;
            }
            p {
                line-height: 1.5em;
            }
            p.links {
                font-weight: bold;
                text-align: right;
            }
            h1 {
                font-family: serif;
                border-bottom: 2px solid #777;
            }
            h2 {
                border-bottom: 1px solid #ccc;
            }
            h3 {
                margin-top: 40px;
            }
            .left {
                width: 570px;
                float: left;
            }
            .right {
                width: 210px;
                float: right;
            }
            .clear {
                clear: both;
                font-size: 1px;
                line-height: 1px;
            }
            .image {
                text-align: center;
                padding: 20px;
            }
        </style>
    </head>
    <body>
        <div id="wrapper">
            <a href="img/earth.png"><img src="img/earth_medium.jpg" style="margin-top: 20px;" /></a>

            <h1>Emil Hernvall</h1>

            <div class="left">
                <p>
                This page is a collection of various experiments I've done throughout the years. Most of what
                you'll find here are weekend projects, but a few are a bit more extensive.
                </p>

                <p>
                Although not as much nowadays, I used to be an active member at Stack Overflow. You can
                check out my profile to the right.
                </p>
            </div>

            <div class="right">
                <p>
                <img src="https://2.gravatar.com/avatar/88d764e133d0f8efa23c7fc033bfcb34?d=https%3A%2F%2Fidenticons.github.com%2Fcc401ab439f2fe0a467c6ee73961bdef.png&r=x&s=208" />
                </p>

                <p>
                <a href="http://stackoverflow.com/users/73772/emil-h">
                    <img src="http://stackoverflow.com/users/flair/73772.png" width="208" height="58">
                </a>
                </p>
            </div>

            <div class="clear">&nbsp;</div>

            <h2>Projects</h2>

            <p>
            This is an incomplete list of things I've done throughout the years. It's not
            representative of my professional work, but does convey a good picture of my interests.
            The major themes are graphics programming, network programming and programming languages.
            </p>

            <h3>Bubblespinner (2017)</h3>

            <p class="image">
            <a href="bubblespinner/bubblespinner.png"><img src="bubblespinner/bubblespinner_small.png" /></a>
            </p>

            <p>The objective is to hit bubbles of the same color. If you hit a group of
            two or more with a bubble of the same color, they'll fall off. Once you've
            cleared them all, you move to the next level.</p>

            <p>The original version of this game has been a pastime of mine for many
            years, and I've been looking to write my own implementation for a long time.
            There's a bit of physics-simulation going on here (notably the conservation of
            angular momentum to calculate rotation speed), which made it a bit extra fun
            to work on. I've put some extra effort into making the source code readable.</p>

            <p class="links">
            &raquo; <a href="/bubblespinner/bubblespinner.html">Play Now</a>
            &raquo; <a href="https://github.com/EmilHernvall/bubblespinner">Source code</a>
            </p>

            <h3>HostIMG (2017 - present)</h3>

            <p>I've built many different image galleries throughout the years, and
            most of them has generated thumbnails on demand, which causes a lousy
            user experience when the gallery is first loaded. A better solution,
            I believe, is to detect new images and do the work in the background
            immediately. HostIMG is such a server written in Rust. Given a directory,
            it'll use inotify to watch for changes, and automatically generate
            thumbnails. A built-in web server serves up the images in the directory.</p>

            <p>This is a low intensity work in progress project, which I'm extending
            as needed.</p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/hostimg">Source code</a>
            </p>

            <h3>Pacman (2017)</h3>

            <p class="image">
            <a href="pacman/pacman.png"><img src="pacman/pacman_small.png" /></a>
            </p>

            <p>
                A pacman clone in javascript. Originally conceived as a way to explore the utility of
                immutable state representation in a stateful application like a game.
            </p>

            <p class="links">
            &raquo; <a href="/pacman">Play Now</a>
            &raquo; <a href="https://github.com/EmilHernvall/pacman">Source code</a>
            </p>

            <h3>Cesium (2016 - present)</h3>

            <p>Version control of database schemas has always been a pain, and the
            existing solutions aren't very satisfactory. Furthermore, they don't
            usually work well with multi-branch workflows in git/hg.</p>

            <p>Cesium is my attempt at a solution. It uses a git-inspired patch-based
            structure, where small sql patch files are chained together. The real
            power of Cesium comes from its built-in sql parser, though: it can
            understand the patches without talking to a server. This enables
            comparison of different branches without talking to a server, comparison
            of on-disk patches to a running server, and so on. Regardless of your
            workflow, Cesium should support it better than existing solutions.</p>

            <p>This is a rather ambitious project, which is still in an early
            prototype stage. Much of the hard work has already been done, though,
            and cesium can already successfully parse a sequence of patches and
            describe the schema structure. It can also retrieve a database schema
            from a running server. Current work is on applying changes in either 
            direction.</p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/cesium">Source code</a>
            </p>

            <h3>Hermes (2016)</h3>

            <p>
                A DNS server written in Rust, with a built-in web server for managing zones.
                Written as an exploration of the language as well as the details of the protocol.
                Quite an extensive project, which supports most of the features expected
                in a DNS server except for spoofing mitigation. Neither heurestic mitigation
                nor DNSSEC is currently supported, although I'll likely resume development
                at some point.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/hermes">Source code</a>
            </p>

            <h3>expiler (2014)</h3>

            <p>
            This is an experiment with generating java bytecode. After playing around
            with the asm library for a bit and gaining a better understanding of java bytecode,
            I decided to implement a simple program which parses mathematical expressions and
            converts them into executable java classes.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/expiler">Source code</a>
            </p>

            <h3>Ray tracer (2013)</h3>

            <p class="image">
            <a href="img/reflection.png"><img src="img/reflection_small.png" /></a>
            </p>

            <p>
            A simple experiment and learning project, written in C++. Uses the phong
            reflection model to shade objects, with full support for reflections.
            The source code only depends on libgd2. I used this project to render the
            picture of earth at the top of this page.
            </p>

            <p>
            This is to some extent just a C++ port of the <a href="http://meatfighter.com/juggler/">Amiga Juggler reimplementation</a>,
            which kinda shows from the structure of the code, but there's a few enhancements
            of my own. For instance, support for multiple lights. Further work on this
            project will probably attempt to introduce an acceleration data structure,
            and some way of loading scenes from disk.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/RayTracer">Source code</a>
            </p>

            <h3>UglyLang (2012-)</h3>

            <p>
            Toy programming language. It's currently implemented in Java, but I dream of bootstrapping
            it eventually. Current all execution is interpreted. The language as such is characterized
            by its static type system, which guarantees type safety. It's a cross between the functional
            and imperative paradigms. The current lack of support for generic programming combined with
            the strict type safety limits its usability, although I'm hoping to resolve that eventually.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/UglyLang">Source code</a>
            </p>

            <h3>Tregmine (2011-)</h3>

            <p>
            Plugin for the bukkit minecraft server, that provides most of the features needed
            to run an economy/survival server. It's a collaboration with a number of other developers,
            for the <a href="http://tregmine.info">Tregmine</a> minecraft server.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/Tregmine">Source code</a>
            </p>

            <h3>3D Engine (2011)</h3>

            <p class="image">
            <a href="img/3dengine.jpg"><img src="img/3dengine-small.jpg" /></a>
            </p>

            <p>
            Experiment with software rasterization. Written mostly as a learning project,
            and horrendously unoptimized. When I started out with this, I had no experience
            whatsoever in 3d programming, and thus I spent some time documenting my research
            as a diary, which is available in the repository. (I did have a solid understanding
            of basic linear algebra, though.)
            </p>

            <p>
            The major feature I never got around to would be texture mapping, which will
            probably be added at some point. Still, it'd be hard to argue that this project
            is suited for any real life applications, even after that's done.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/3DEngine">Source code</a>
            &raquo; <a href="downloads/3dengine.jar">Download</a>
            </p>

            <h3>SassyBarista (2011-2012)</h3>

            <p>
            A java implementation of the <a href="http://sass-lang.com/">SASS</a> language, which
            is a superset of CSS. Based on a JavaCC grammar. See link for a more complete
            description.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/SassyBarista">Source code</a>
            &raquo; <a href="downloads/sassybarista.jar">Download</a>
            </p>

            <h3>FatCat (2010-2011)</h3>

            <p>
            A java implementation of an irc server. It was designed in a way that would
            make it easy to add other protocols, with a core that simply manages the server
            state. The only other protocol that I ever tried adding was minecraft support,
            by embedding it in bukkit, and wrapping the mc-related state in a protocol
            handler. It worked pretty well, and turned out really cool.</p>

            <p>fatcat has a completely asynchronous network thread using java.nio.
            There's currently no support for linking other servers, and also no services.
            I have some wild ideas about expanding fatcat with distributed linking support,
            and using something like vector clocks to synchronize state, but I'm not
            sure when I'll get around to that.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/fatcat">Source code</a>
            &raquo; <a href="downloads/fatcat.jar">Download</a>
            </p>

            <h3>Candify (December 2010)</h3>

            <p class="image">
            <a href="http://github.com/EmilHernvall/candify/raw/master/candify.png"><img src="img/candify.jpg" /></a>
            </p>

            <p>
            A visualizer framework for spotify, using the official libspotify. Includes some
            simple FFT-based visualizers, that doesn't work nearly as well as I'd hoped.
            This is entirely due to my severely lacking understanding of signal processing.
            The addition of some type of online filter would probably result in a lot more
            recognizable beats. It does look pretty nice, though. Uses the windows DirectDraw API.
            </p>
            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/candify">Source code</a>
            &raquo; <a href="downloads/candify.zip">Download</a>
            </p>

            <h3>Collapsible (October 2010)</h3>

            <p class="image">
            <a href="http://github.com/EmilHernvall/collapsible/raw/master/collapsible.jpg"><img src="img/collapsible.jpg" /></a>
            </p>

            <p>
            Horrendously ugly tetris clone. WinApi and DirectDraw. My first and final
            attempt at doing game graphics.
            </p>
            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/collapsible">Source code</a>
            &raquo; <a href="downloads/collapsible.zip">Download</a>
            </p>

            <h3>Calculator (2009)</h3>

            <p>
            A java program that evaluates arbitrary mathematical expressions.
            Also includes some primitive plotting capabilities. I wrote this
            before I had spent any time whatsoever researching parsing. If I
            redid it today, I'd probably use ANTLR or a recursive descent parser.
            This project used a completely ad-hoc approach, which turned out
            surprisingly robust. Features a really crappy math shell.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/calculator">Source code</a>
            &raquo; <a href="downloads/calc.jar">Download</a>
            </p>

            <h3>Cropper (August 2008)</h3>

            <p class="image">
            <a href="http://github.com/EmilHernvall/cropper/raw/master/cropper.png"><img src="img/cropper.jpg" /></a>
            </p>

            <p>
            Simple program to crop images quickly. Written using WinApi and GDI+. I wrote
            this to optimize my photo editing workflow, since it felt a bit too painful
            to launch a full image editor every time I simply wanted to crop an image.
            This is my attempt to solve that specific problem in a really lightweight way.
            </p>

            <p class="links">
            &raquo; <a href="http://github.com/EmilHernvall/cropper">Source code</a>
            &raquo; <a href="downloads/cropper.zip">Download</a>
            </p>

            <h3>Project Euler Solutions (2008)</h3>

            <p>
            Solutions for the hundred first <a href="http://projecteuler.net/">Project Euler</a>
            or so. Some problems have several solutions, and not all of them might work. A few
            problems (probably less than five) have partial solutions that doesn't give the
            correct answer.
            </p>

            <p>
            This repository contains solutions in several different languages. Most of them
            are written in python, since I started doing Project Euler solutions as a way
            of learning that language. However, there are some solutions I've done in C as
            a way of practicing low-level optimization, and there's a few in Haskell which
            I also did for learning purposes. Warning: My Haskell is pretty awful.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/projecteuler">Source code</a>
            </p>

            <h3>Mosaic (2008)</h3>

            <p class="image">
            <a href="img/sture.jpg">
                <img src="img/sture-small.jpg" />
            </a>
            </p>

            <p>
            A small unix program that constructs an image mosaic from a source image
            and a collection of smaller images (mosaic bricks). There's a few major
            issues with this program:
            </p>

            <ol>
                <li>It does not attempt to avoid putting identical tiles next to each other.</li>
                <li>It's O(n) in the number of tiles. A better idea would be to use something
                like kd-trees to quickly find a tile close to a pixels color in 3d RGB space.</li>
            </ol>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/mosaic">Source code</a>
            </p>

            <h3>ImageRetarget (2007)</h3>

            <p>
            An implementation of the <a href="http://en.wikipedia.org/wiki/Seam_carving">seam carving</a>
            algorithm I did back when it was first released. I was absolutely fascinated by the paper,
            and implemented it in both PHP and Java. This repository contains only the java-version,
            which has some interesting quirks. For instance, I'm calculating the energy of the image
            using a literal interpretation of the method in the paper rather than using a simple sobel
            transform. This involves interpolating the pixels as a cubic equation and calculating the
            partial derivatives. As far as I can tell, this has no real advantages over the sobel
            approach, but it's a rather beuatiful over-complication.
            </p>

            <p class="links">
            &raquo; <a href="https://github.com/EmilHernvall/imageretarget">Source code</a>
            </p>

            <h2>Experiments and snippets</h2>

            <p>
            Smaller projects and experiments I've done, of somewhat varying quality.
            </p>

            <dl>
                <dt><a href="https://gist.github.com/EmilHernvall/7301722">HoffProxy</a></dt>
                <dd>
                An old practical joke, on my coworkers. A transparent HTTP proxy that manipulates images
                by inserting a picture of David Hasslehoff. I used an iptables rule on the office router
                to pass all HTTP traffic through this proxy.
                </dd>
                <dt><a href="https://github.com/EmilHernvall/mod_hmacauth">mod_hmacauth</a></dt>
                <dd>
                mod_hmacauth is an apache 2.2 module that provides hmac-md5 based authentication of
                requests. Apache configuration can be used to specify which files require authentication,
                and the requester then have to provide a timestamp and a secret as part of the querystring.
                </dd>
                <dt><a href="https://github.com/EmilHernvall/playlistcopy">PlaylistCopy</a></dt>
                <dd>
                Very small program for copying the contents of a .m3u playlist to a specified
                target directory.
                </dd>
                <dt><a href="https://github.com/EmilHernvall/QuadTree">Quad Tree in Java</a></dt>
                <dd>
                An implementation of a <a href="http://en.wikipedia.org/wiki/Quadtree">Quad Tree</a>,
                originally written for use in a Minecraft Server. Optimized for efficiently looking
                up which of a set of rectangles that a point in 2d space belongs to. Only supports
                a sub set of operations right now.
                </dd>
                <dt><a href="https://github.com/EmilHernvall/hqx">HQX bindings for PHP</a></dt>
                <dd>
                The HQX library provides an algorithm for scaling pixel graphics
                with superior quality compared to standard interpolation methods.
                </dd>
                <dt><a href="https://gist.github.com/1044997">Sudoku Solver in C</a></dt>
                <dd>
                Using the naive substitute-and-permute approach.
                </dd>

                <dt><a href="https://gist.github.com/954073">Date diff implementation for PHP</a></dt>

                <dt><a href="https://gist.github.com/953967">Decoder for the EA .big-format</a></dt>
                <dd>
                Used it to retrieve the videos for Red Alert 3. A really basic format, that was
                quite simple to reverse engineer.
                </dd>

                <dt><a href="https://gist.github.com/953733">Base64 encoder and decoder in Java</a></dt>

                <dt>Finding the most popular word in a file</dt>
                <dd><a href="https://gist.github.com/953744">Using linked lists and merge sort (C)</a></dd>
                <dd><a href="https://gist.github.com/953745">Using a hash set (C)</a></dd>
                <dd><a href="https://gist.github.com/953748">In Java</a></dd>
                <dd>
                Some different implementations of a word counter that I wrote as part of an argument
                with a friend.
                </dd>

                <dt>Some basic code for parsing and generating wave-files</dt>
                <dd><a href="https://gist.github.com/953759">Parser in C</a></dd>
                <dd><a href="https://gist.github.com/953775">Tone generator in C</a></dd>

                <dt><a href="https://gist.github.com/953783">Recursive mkdir in C</a></dt>

                <dt><a href="https://gist.github.com/953916">Tiny java/swing app for language learning</a></dt>

                <dt><a href="https://gist.github.com/953802">Indexing spellchecker in PHP</a></dt>

                <dt><a href="https://gist.github.com/953786">Find a way to reverse a hand of five cards by moving three cards</a></dt>

                <dt><a href="https://gist.github.com/953785">setuid() to another user and give group members write permission to files with certain extensions.</a></dt>

                <dt>Prime Sieves</dt>
                <dd><a href="https://gist.github.com/953776">Basic</a></dd>
                <dd><a href="https://gist.github.com/953778">Smart</a></dd>

                <dt><a href="https://gist.github.com/1250788">Experiment with encoding data as sound</a></dt>
                <dd>
                Transforms a data file to a series of beeps of different frequencies, that can be decoded
                back into the original file.
                </dd>
            </dl>

            <h2>Contact</h2>

            <p>
            You can get in contact with me using my gmail. My username is emil.hernvall.
            </p>
        </div>

        <script>
          (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
          (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
          m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
          })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

          ga('create', 'UA-45279607-1', 'emilhernvall.github.io');
          ga('send', 'pageview');

        </script>
    </body>
</html>
